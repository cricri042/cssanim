"use strict";function iterationChange(e){var t=e.ownerDocument,n=t.getElementById("rmAfterLoadSpan"),i=t.getElementById("rmAfterLoadInput");"0"===e.value?(n.style.color="lightgrey",i.disabled=!0):(n.style.color="black",i.disabled=!1)}function animSelectionChange(e){var t,n=CKEDITOR.plugins.cssanim.ckEditor.lang.cssanim,i=e.parentElement.parentElement,a=i.parentNode.parentNode.parentNode.getElementsByClassName("cssAnimButton"),l=e.ownerDocument,s=l.getElementById("rmAfterLoadSpan"),o=l.getElementById("rmAfterLoadInput"),d=l.getElementsByName("anim_L").item(0),r=l.getElementsByName("anim_C").item(0),c=l.getElementsByName("anim_O").item(0);if("anim_L"===e.name&&"none"===d.value){if("cssAnimPause"===r.value)return alert(n.pbOnClickPause),void(d.selectedIndex=selectList_cache);if("cssAnimPause"===c.value)return alert(n.pbOnOverPause),void(d.selectedIndex=selectList_cache)}if("anim_C"===e.name&&"none"===d.value&&"cssAnimPause"===r.value)return alert(n.pbOnClickOnLoadNone),void(r.selectedIndex=selectList_cache);if("anim_O"===e.name&&"none"===d.value&&"cssAnimPause"===c.value)return alert(n.pbOnOverOnLoadNone),void(c.selectedIndex=selectList_cache);if("cssAnimPause"===e.value||"none"===e.value){for(t=1;t<i.childElementCount;t+=1)i.childNodes[t].style.opacity=0;a[0].style.display="none","anim_L"===e.name&&(s.style.color="lightgrey",o.disabled=!0)}else{for(t=1;t<i.childElementCount;t+=1)i.childNodes[t].style.opacity="initial";a[0].style.display="initial","anim_L"===e.name&&(s.style.color="black",o.disabled=!1)}}var selectList_cache;CKEDITOR.dialog.add("cssanimAddAnimDialog",function(e){function t(e,t,n){var i,a,s="";s+='<select  onclick="selectList_cache=this.selectedIndex" onChange="animSelectionChange(this);" name="anim'+t+'">',i="","none"===n&&(i="selected"),s+='<option value="none" '+i+">"+l.none+"</option>","_L"!==t&&(i="","cssAnimPause"===n&&(i="selected"),s+='<option value="cssAnimPause" '+i+">"+l.cssAnimPause+"</option>");var o,d;for(o in e){for(d=e[o],s+='<optgroup label="'+o+'" style="font-weight:bold">',a=0;a<d.length;a+=1)i="",d[a]===n&&(i="selected"),s+='<option value="'+d[a]+'" '+i+">"+d[a]+"</option>";s+="  </optgroup>"}return s+="</select>"}function n(e,n,i,a){var s,o,d="",r='checked = "checked"',c=0,m="normal",g=1,p=1,u="none",h="linear",b=["linear","ease","ease-in","ease-out","ease-in-out"],y=["normal","alternate"],x=null,v="",C="black";for(a&&(a.indexOf("animation-play-state")>=0?x={name:"cssAnimPause",duration:null,timingFunction:"linear",delay:0,iterationCount:1,direction:"normal"}:(o=a.replace("{animation:","").replace("}","").replace(";","").trim(),x=parseCSS3AnimationShorthand(o)),c=x.delay/1e3,m=x.direction,g=x.duration/1e3,p=x.iterationCount,"infinite"===p&&(p=0,i=!1),u=x.name,h=x.timingFunction),d+='<table style="display:block; overflow-y=scroll; height: 75px; overflow-y: auto; width:550px;">',d+="<tr>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:100px;">',d+=l.name,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:60px;">',d+=l.duration,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:100px;">',d+=l.tFunc,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:60px;">',d+=l.delay,d+="</th>",d+='<th title="If set to 0, iteration will be set as \'infinite\'" style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:70px;">',d+=l.iter,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px;">',d+=l.direction,d+="</th>",d+="</tr>",d+="<tr>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+=t(e,n,u),d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<input name="duration'+n+'" type="number" min="1" max="600" value="'+g+'" style="width:4em; border:1px solid gainsboro;">sec',d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<select name="timing'+n+'" style="border:1px solid gainsboro;">',s=0;s<b.length;s+=1)v="",b[s]===h&&(v="selected"),d+='<option value="'+b[s]+'" '+v+">"+b[s]+"</option>";for(d+="</select>",d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<input name="delay'+n+'" type="number" min="0" max="600" value="'+c+'" style="width:4em; border:1px solid gainsboro;">sec',d+="</td>",d+='<td title="If set to 0, iteration will be set as \'infinite\'" style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<input name="iteration'+n+'" type="number" min="0" max="99" value="'+p+'" style="width:3em; border:1px solid gainsboro" onChange="iterationChange(this);">',d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<select name="direction'+n+'" style="border:1px solid gainsboro;">',s=0;s<y.length;s+=1)v="",y[s]===m&&(v="selected"),d+='<option value="'+y[s]+'" '+v+">"+y[s]+"</option>";return d+="</select>",d+="</td>",d+="</tr>",C="black",null!==i&&(i===!1&&(r=""),0===p&&(r="disabled",C="lightgrey"),d+="<tr>",d+='<td colspan="3" style="text-align: center;padding: 3px; border-left: 1px solid gainsboro; border-bottom: 1px solid gainsboro;">',d+='<span id="rmAfterLoadSpan" style="color:'+C+'" title="'+l.ralTitle+'">'+l.ral+"</span>",d+="</td>",d+='<td colspan="3" style="text-align: left; padding: 3px;  border-right: 1px solid gainsboro; border-bottom: 1px solid gainsboro;">',d+='<input  id="rmAfterLoadInput" type="checkbox" name="rmAfterLoad"  '+r+">",d+="</td>",d+="</tr>"),d+="</table>"}function i(e,t){var i,d=null;d=e.getAttribute("data-animation"),d&&(i=decodeURIComponent(d),d=JSON.parse(i),CKEDITOR.plugins.cssanim.managePending&&(a[a.length]=[e.getId(),i]));var r,c,m="",g="OnLoad",p="OnOver",u="OnClick";m+='<div class="tabs" style="width:600px;">',m+='<div class="tab">',m+='<input type="radio" id="tab-Over" name="tab-group-1" >',m+='<label for="tab-Over">'+p+"</label>",m+='<div id="cssanimAddAnimDialogTabOver" class="content" style="height:85px;">',r=d&&d.cdo?d.cdo:null,m+=n(t,"_O",null,r),m+='<div style="text-align: center; padding: 5px;">',m+='<input type="button" class="cssAnimButton" value="'+l.testIt+' !" name="overBtn" onclick="CKEDITOR.plugins.cssanim.cssanimAddAnimDialogTest(this);">',m+="</div> ",m+="</div> ",m+='<div class="tab">',m+='<input type="radio" id="tab-Click" name="tab-group-1" >',m+='<label for="tab-Click">'+u+"</label>",m+='<div  id="cssanimAddAnimDialogTabClick" class="content" style="height:85px;">',r=d&&d.cdc?d.cdc:null,m+=n(t,"_C",null,r),m+='<div style="text-align: center; padding: 5px;">',m+='<input type="button" class="cssAnimButton" value="'+l.testIt+' !" name="clickBtn" onclick="CKEDITOR.plugins.cssanim.cssanimAddAnimDialogTest(this);">',m+="</div> ",m+="</div> ",m+='<div class="tab">',m+='<input type="radio" id="tab-Load" name="tab-group-1" checked>',m+='<label for="tab-Load">'+g+"</label>",m+='<div  id="cssanimAddAnimDialogTabLoad" class="content" style="height:85px;">',r=d&&d.cds?d.cds:null,c=d?d.ral:!0,m+=n(t,"_L",c,r),m+='<div style="text-align: center; padding: 5px;">',m+='<input type="button" class="cssAnimButton" value="'+l.testIt+' !" name="loadBtn" onclick="CKEDITOR.plugins.cssanim.cssanimAddAnimDialogTest(this);">',m+="</div> ",m+="</div> ",m+="</div>";var h='<link rel="stylesheet" href="./ckeditor/plugins/cssanim/css/cssanim.css"><style type="text/css">.cke_cssanim_container{color:#000 !important;padding:10px 10px 0;margin-top:5px;text-align: center;}.cke_cssanim_container p{margin: 0 0 10px;}</style><div class="cke_cssanim_container"><div class="cke_cssanim_container_div" style="text-align: center; border: 1px solid grey; width:50%;margin-left: auto;margin-right: auto;"><img class="cke_cssanim_container_img" src="'+s+'" alt="CSS Animation" style="border: 1px solid grey; padding: 5px; margin: 10px;"></div><br><br><p id="elemName" style="font-weight:bold;font-size: larger;text-align: -webkit-center;">Animation '+l.forStr+" : "+o.getName()+"</p><br>"+m+"</div>";return h}var a,l=e.lang.cssanim,s=CKEDITOR.getUrl(CKEDITOR.plugins.get("cssanim").path+"dialogs/css3animation.png"),o=null;return{title:l.editAnimsTitle,width:600,minWidth:600,height:400,minHeight:400,resizable:CKEDITOR.DIALOG_RESIZE_NONE,contents:[{id:"mainPanel",label:"CSS_Animation",title:"Animation",padding:0,elements:[{type:"html",id:"htmlAnim",html:"",setup:function(){var t=document.getElementById(this.domId),n=e.config.allowedAnimations;CKEDITOR.plugins.cssanim.runHighLightElem(o),t.innerHTML=i(o,n),CKEDITOR.plugins.cssanim.cssanimAddAnimDialog=t},cancel:function(){CKEDITOR.plugins.cssanim.cleanHighlight()},commit:function(){CKEDITOR.plugins.cssanim.cleanHighlight();var e,t=this.getElement().getElementsByTag("input"),n=this.getElement().getElementsByTag("select"),i={};i.animStart=null,i.animClick=null,i.animOver=null,i.ral=!1,e=n.getItem("anim_L").getValue();var a;"none"!==e&&(i.animStart=e+" ",i.animStart+=t.getItem("duration_L").getValue()+"s ",i.animStart+=n.getItem("timing_L").getValue()+" ",i.animStart+=t.getItem("delay_L").getValue()+"s ",a=t.getItem("iteration_L").getValue(),"0"===a&&(a="infinite"),i.animStart+=a+" ",i.animStart+=n.getItem("direction_L").getValue(),t.getItem("rmAfterLoad").$.checked&&"infinite"!==a&&(i.ral=!0)),e=n.getItem("anim_C").getValue(),"none"!==e&&(i.animClick=e+" ",i.animClick+=t.getItem("duration_C").getValue()+"s ",i.animClick+=n.getItem("timing_C").getValue()+" ",i.animClick+=t.getItem("delay_C").getValue()+"s ",a=t.getItem("iteration_C").getValue(),"0"===a&&(a="infinite"),i.animClick+=a+" ",i.animClick+=n.getItem("direction_C").getValue()),e=n.getItem("anim_O").getValue(),"none"!==e&&(i.animOver=e+" ",i.animOver+=t.getItem("duration_O").getValue()+"s ",i.animOver+=n.getItem("timing_O").getValue()+" ",i.animOver+=t.getItem("delay_O").getValue()+"s ",a=t.getItem("iteration_O").getValue(),"0"===a&&(a="infinite"),i.animOver+=a+" ",i.animOver+=n.getItem("direction_O").getValue()),CKEDITOR.plugins.cssanim.runAddAnimElem(o,i)}}]}],onShow:function(){o=CKEDITOR.plugins.cssanim.curSelectedElement,CKEDITOR.plugins.cssanim.managePending&&(a=CKEDITOR.plugins.cssanim.pendingChanges),this.setupContent();var e,t=this.getContentElement("mainPanel","htmlAnim"),n=t.getInputElement(),i=n.getElementsByTag("select");e=i.getItem("anim_L"),animSelectionChange(e.$),e=i.getItem("anim_C"),animSelectionChange(e.$),e=i.getItem("anim_O"),animSelectionChange(e.$)},onOk:function(){this.commitContent(),CKEDITOR.plugins.cssanim.managePending&&(CKEDITOR.plugins.cssanim.pendingChanges=a,CKEDITOR.plugins.cssanim.refreshCssAnimDialogAnimationsTab())},onCancel:function(){this.foreach(function(e){e.cancel&&e.cancel.apply(e)})}}});